<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="blog, 褚林银, 博客" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="褚林银的秘密基地">
<meta property="og:type" content="website">
<meta property="og:title" content="褚林银的秘密基地">
<meta property="og:url" content="http://chulinyin.com/page/7/index.html">
<meta property="og:site_name" content="褚林银的秘密基地">
<meta property="og:description" content="褚林银的秘密基地">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="褚林银的秘密基地">
<meta name="twitter:description" content="褚林银的秘密基地">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://chulinyin.com/page/7/"/>


  <title> 褚林银的秘密基地 </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">褚林银的秘密基地</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Write down my thinking</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/10/初见模块化编程（2）/" itemprop="url">
                  初见模块化编程（2）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-10T00:28:55+08:00" content="2016-06-10">
              2016-06-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/10/初见模块化编程（2）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/10/初见模块化编程（2）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/10/初见模块化编程（2）/" class="leancloud_visitors" data-flag-title="初见模块化编程（2）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上次说到在C++中如何进行面向对象或者说模块化地编程，总得来说可以是<strong>三步走：</strong></p>
<ol>
<li>声明类，创建类成员和类方法；</li>
<li>定义初始化构造函数，定义类方法；</li>
<li>在main函数中调用实例化类，进行调用，完成需求开发。</li>
</ol>
<p>好，那么终极问题来了，如何在JS中实现如此好用的模块化编程？<br>首先在ES6以前，JS原生是不支持显示地声明一个类，当然更没有公有/私有成员和方法。那可怎么办？</p>
<h3 id="1-直接用对象字面量？"><a href="#1-直接用对象字面量？" class="headerlink" title="1. 直接用对象字面量？"></a>1. 直接用对象字面量？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var Person = &#123;</div><div class="line">    name: &apos;xiaoMing&apos;,</div><div class="line">    age: 10,</div><div class="line">    say: function()&#123;console.log(this.name);&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样肯定不行啊，首先没有所谓的公有私有，其次一不小心就会被修改，最后定义声明和定义连耦合在一起，也不能复用，也没有声明它本身需要依赖别的什么模块。</p>
<h3 id="2-使用匿名函数创建局部作用域-IIFE-？"><a href="#2-使用匿名函数创建局部作用域-IIFE-？" class="headerlink" title="2. 使用匿名函数创建局部作用域(IIFE)？"></a>2. 使用匿名函数创建局部作用域(IIFE)？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var Person = (function(dep)&#123;</div><div class="line">    var name = &apos;xiaoMing&apos;;</div><div class="line">    var age = dep.age;</div><div class="line">    function say()&#123;</div><div class="line">        console.log(name);</div><div class="line">    &#125;</div><div class="line">    return &#123;</div><div class="line">        age:age，</div><div class="line">        say:say</div><div class="line">    &#125;</div><div class="line">&#125;)(depend)</div></pre></td></tr></table></figure>
<p>这样之后name就变成了私有变量，因为外部没法访问更没法修改，Person暴露给外部的仅仅是age属性和say方法。同时也能够声明依赖了，但是这样子仍然污染了全局变量，而且必须得保证依赖模块先被加载。</p>
<h3 id="3-创建一个可以用来存储模块的函数？"><a href="#3-创建一个可以用来存储模块的函数？" class="headerlink" title="3. 创建一个可以用来存储模块的函数？"></a>3. 创建一个可以用来存储模块的函数？</h3><p>12.30了….明天继续&lt;(￣︶￣)&gt;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/09/初见模块化编程（1）/" itemprop="url">
                  初见模块化编程（1）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-09T00:49:09+08:00" content="2016-06-09">
              2016-06-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/09/初见模块化编程（1）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/09/初见模块化编程（1）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/09/初见模块化编程（1）/" class="leancloud_visitors" data-flag-title="初见模块化编程（1）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天早上在复习网易云课堂前端微专业中的“产品架构”那一块内容，主要是想理清在一款产品开发中，<code>前端所扮演的角色</code>以及<code>前端的开发流程</code>。起因是最近突然接触到了MV*架构模式，接触到工程化开发，可是有点丈二和尚摸不着头脑。经过了几个小时的复习，大致搞清楚了视图层、模型层、控制层到底是什么意思，也了解了什么叫模板以及它的作用。</p>
<blockquote>
<p>我们在浏览器中输入URL（地址）后，浏览器会向服务器发送一份请求，然后控制层根据请求从数据层获取所需数据，再从视图层获取模板结构，然后将数据和模板整合成一个页面文件，发送给浏览器，这时候浏览器上就会显示部分页面。然后浏览器可能会发送异步请求（ajax）,再载入其余页面。</p>
</blockquote>
<p>因为了解的还不是很全面深入，只是有个总体的感觉，所以还是留待下次再写吧~</p>
<p>下面先初步讲下模块化编程吧~<br>模块化编程在C++体现地异常明显，下面开始我的<strong>半吊子C++概述</strong>：</p>
<p>1.在C++中每个类都会有一个.h文件里面声明了类的公有、私有成员和方法，里面不写具体的代码（相当于声明一个对象所有的接口）。比如说：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// Person.h</div><div class="line">class Person&#123;</div><div class="line">    public:</div><div class="line">        char *name;</div><div class="line">        Person(char *name);//构造函数，可用于初始化成员</div><div class="line">        void sayAge();</div><div class="line">    private:</div><div class="line">        int age;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.然后在这个对象下会有若干个.h文件，一般用于对一些方法进行具体的描述:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// Person.cpp</div><div class="line">#include &quot;Person.h&quot;</div><div class="line">Person::Person(char *name,int age)&#123;</div><div class="line">    this-&gt;name = name;</div><div class="line">    this-&gt;age = age;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// say.cpp</div><div class="line">#include &quot;Person.h&quot;</div><div class="line">void Person::sayAge()&#123;</div><div class="line">    return age;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.最后会有一个主程序叫main.cpp文件，开始调用各个对象完成所需的业务逻辑。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// main.cpp</div><div class="line">#include &quot;Person.h&quot;</div><div class="line">void main()&#123;</div><div class="line">    Person person1(&apos;xiaoming&apos;,20);</div><div class="line">    cout&lt;&lt;&quot;age=&quot;&lt;&lt;person1.sayAge()&lt;&lt;endl;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>那这样做的好处是什么呢？</strong><br>在构建大型项目的时候，往往是多人协同开发，每个人负责开发不同的特性。这样写的好处就是：</p>
<ul>
<li>我不必了解你内部的具体代码实现，我只要看一眼你的.h文件就知道你负责的类该如何使用。</li>
<li>进行主程序编写的时候，只要把需要用到的类包含进来，然后实例化对象之后就可以调用了。</li>
<li>后期进行维护也会变得异常方便，如果想要增加新功能，只需要新增类或者类方法即可，如果需要修改功能，也能马上找到对应的类，然后去修改对应的方法即可。</li>
</ul>
<p><strong>以上就是所谓的模块化编程，在构建大型项目的时候超级有用！</strong></p>
<p>好，那么接下来，问题来了：</p>
<blockquote>
<p>既然模块化编程这么好用，我为什么不能用在JS当中呢？这样可以构建网页应用，不是很爽吗？</p>
</blockquote>
<p>下次再说……<br>（又快1点了，主要是自己给自己挖了个坑，想用自己拿蹩脚的C++解释模块化编程，结果一开始写就发现自己已经全忘了，不得不上网查查资料，再翻翻书ค(TㅅT)）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/08/深夜日记（13）/" itemprop="url">
                  深夜日记（13）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-08T00:17:26+08:00" content="2016-06-08">
              2016-06-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日记/" itemprop="url" rel="index">
                    <span itemprop="name">日记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/08/深夜日记（13）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/08/深夜日记（13）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/08/深夜日记（13）/" class="leancloud_visitors" data-flag-title="深夜日记（13）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h2><p>今天中午的时候收到了‘淘粉吧’HR的电话，先给我分析了我的优点，然后紧接着说我的缺点是没有项目合作经验……balabala……就在我以为要黄的时候，她话锋一转，说经过内部商议后决定给我offer，然后给我讲了待遇问题以及问我什么时候能够去报到。（这里HR其实有点运用心理技巧……）</p>
<p>首先关于待遇，她说是120一天，工作时间从9.30-6.30，双休。我听到后感觉还不错，可后来和女朋友交流了后发现，这双休的时候究竟算不算钱呢？这就有点奇怪了，如果不算钱，那还叫双休吗？如果算钱，那更不科学，你都没有给公司创造价值，凭什么给你钱？我仔细想了想，决定还是不再去追问了。因为如果有的话，那就很好，没有的话也可以接受，我的自我定位是学习项目，拼命长经验去的。如果工作不满意，可以在秋招的时候再找个更合适的。</p>
<p>然后我问了一些关于公司的管理模式、实习生的培养模式、员工的考核制度等，大体上有个印象，但具体还是得深入公司内部之后才会知道啊~</p>
<p>接下来就要考虑住的问题了……因为G20，暑假学校不让住，那就只能自己去找租房子的地方，这里感觉又会有很多坑等着我去踩。</p>
<ul>
<li>如果住学校周边，来回就很麻烦，但是胜在租金便宜以及搬迁简单。</li>
<li>如果住公司附近，来回是方便多了（至少不用坐1个半小时的公交车），但是租金肯定很贵，找合租也麻烦，还要搬东西，最后估计还会有点难找，因为我可能只会住两个月。</li>
</ul>
<p>先自己尝试着找一下，不行的话就问下我哥，看看能不能帮上忙。至于为什么不一开始就找哥哥帮忙？</p>
<ol>
<li>是想锻炼下自己的独立自主能力</li>
<li>是不想麻烦亲戚（有点社交恐惧）</li>
<li>是觉得万一我哥以为我是想住他家去，把这当成是变相请求，那就麻烦大了（因为他不会收我钱，其次我住的可能也会不自在，他们也会不自在）</li>
</ol>
<h2 id="读书笔记"><a href="#读书笔记" class="headerlink" title="读书笔记"></a>读书笔记</h2><p>今天早上终于成功按时起床，然后看了近一小时的《Beyond feelings,a guide to criticle thinking》。下面是一些笔记：</p>
<p><strong>Four groups of people who are more prone to errors</strong></p>
<ol>
<li>Who seldom reason at all, but think and act as these around them do. Such people want to avoid the difficulty that accompanies thinking for themselves.</li>
<li>Who are determined to let passion rather than reason govern their lives. Such people are only influenced only by reasoning that supports their prejudices.</li>
<li>Who sincerely follow reason, but lack sound, overall good sense, and so do not look at all sides of an issue. Such people tend to talk with one type of person, read one type of book, and so are exposed to only one viewpoint.</li>
<li>Who never bother to reexamine an opinion once it has been formed. These people are often the most error prone of all, for they forfeit all opportunity to correct mistaken opinions when new evidence arises.</li>
</ol>
<p>以上这段话来自书中原文，略有改动。它吧更容易犯错的人分为了四类。一种是自己几乎没有什么道理，确认自己很有道理的人；一种是让情绪控制自己的人；一种是真的会寻找理由，但是却看的不全面的人；还有一种是从来不改变自己已有观点的人。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/07/深夜日记（12）/" itemprop="url">
                  深夜日记（12）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-07T00:05:56+08:00" content="2016-06-07">
              2016-06-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/日记/" itemprop="url" rel="index">
                    <span itemprop="name">日记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/07/深夜日记（12）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/07/深夜日记（12）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/07/深夜日记（12）/" class="leancloud_visitors" data-flag-title="深夜日记（12）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h2><p>今天早上看了一场NBA，骑士又被勇士虐了，以致于第四节基本成为垃圾时间。这真的是总决赛吗？我个人感觉还没有雷霆打马刺以及雷霆打勇士那几场刺激。希望下一场骑士主场的时候情况能有所好转吧，不然骑士岂不是要被横扫？</p>
<p>由于下下周要连考两门，因此中午的时候不得不跑去图书馆看书，晚上也依然在图书馆看书，所以今天没有看前端有关的东西，不过倒是在网上投了几份简历。</p>
<p>我在想，如果工作机会不合适的话，还是回家好好准备两个月后的秋招。其实本来回家准备秋招是最好的选择，阻碍我这样做的原因有以下几个：</p>
<ul>
<li>家人不理解，会以为我待在家混日子；</li>
<li>想要远离家里的一些纠纷；</li>
<li>怕自己自控力不够，不能掌握好进度；</li>
<li>想要尽快尝试下独立的生活；</li>
<li>如果暑假有实习经历，对于秋招帮助应该挺大；</li>
</ul>
<p>但是现在一个是没有合适的公司，一个是由于G20期间不能住学校，出去租房子什么的感觉会比较麻烦，因此又有了干脆回家的想法。</p>
<p>再看看吧，如果到了6月20多号还是没有合适的，就问下哥哥能不能给些帮助，实在没有办法就直接回家了。</p>
<p><strong>低级的烦恼……</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/06/JS跨域请求（5）/" itemprop="url">
                  JS跨域请求（5）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-06T01:05:45+08:00" content="2016-06-06">
              2016-06-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/06/JS跨域请求（5）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/06/JS跨域请求（5）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/06/JS跨域请求（5）/" class="leancloud_visitors" data-flag-title="JS跨域请求（5）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="日常闲扯"><a href="#日常闲扯" class="headerlink" title="日常闲扯"></a>日常闲扯</h2><p>虽然很早的时候心中就默默决定以后于我来说没有所谓的周末，也没有所谓的法定节假日，只有一些自己定义的日子，但是这两天真的不在状态，晚上睡得晚，早上起得晚，白天也是一会清醒一会困得要死，快被折磨疯了。讲道理，明明已经睡够8小时了，为什么中午和晚上还是会困呢？</p>
<p>今天在研究js的架构方面，也就是传说中的MVC、MVVM、MV*模式。反正不管怎么样就是要把Model(模型)和View（视图）通过一个中间者分离开来，同时又通过这个中间者进行相互联系。这样以后，一块代码中就不会出现模型和视图相互耦合导致难以阅读理解和维护了。</p>
<p>那什么是模型呢?模型就是单纯的指一些数据，比如说一个用户的数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    name: &apos;小李&apos;，</div><div class="line">    age: 20,</div><div class="line">    weight: &apos;60KG&apos;,</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那什么是视图呢？视图就是指我们在网页上看到的东西，装逼一点说就是UI（用户界面）。比如说一个“个人信息显示列表”，一开始是一些初始信息，但是我们可以进行增删等操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;div id = &apos;personalInfromation&apos;&gt;</div><div class="line">    &lt;p&gt;姓名: &lt;span&gt;小李&lt;/span&gt;&lt;button&gt;编辑&lt;button&gt;&lt;/p&gt;</div><div class="line">    &lt;p&gt;年龄: &lt;span&gt;20&lt;/span&gt;&lt;button&gt;编辑&lt;button&gt;&lt;/p&gt;</div><div class="line">    &lt;p&gt;体重: &lt;span&gt;60KG&lt;/span&gt;&lt;button&gt;编辑&lt;button&gt;&lt;/p&gt;</div><div class="line">    ...</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>一般我们可能在代码中直接监听单击事件，然后获取输入，然后改变数据对象，同时修改显示。<br>现在我们把监听事件、获取输入、更新数据等统一交给一个对象去搞定。</p>
<p>再说的<strong>直观点</strong>，比如说现在有4个买家和4个卖家，一般模式的话，买家和卖家相互沟通，卖家告诉买家有什么货，然后买家从卖家那里拿货，卖家会不停更新自己的货，这样子买家和卖家如果并不是一一对应的关系话，他们之间的联系就会形成网状结构。<br><img src="JS跨域请求（5）/1.PNG" alt=""></p>
<p>然而如果这时候突然跳出来一个中转商，卖家把自己有的货告诉他，买家把自己要的货告诉他，由他来进行信息的发布和货物的分配，那么三者之间的联系就会简单。所有的卖家都指向他，所有的买家也指向他。<br><img src="JS跨域请求（5）/2.PNG" alt=""></p>
<p>下面进入……</p>
<h2 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h2><h4 id="2-4、Web-Sockets（服务器发送事件）"><a href="#2-4、Web-Sockets（服务器发送事件）" class="headerlink" title="2.4、Web Sockets（服务器发送事件）"></a>2.4、Web Sockets（服务器发送事件）</h4><p>先来说说它有多么优秀吧~</p>
<ul>
<li>全双工、双向通信</li>
<li>取得响应后从HTTP协议升级为Web Socktet协议</li>
<li>能够在客户端和浏览器之间发送非常少的数据，而不像HTTP那样字节级的开销，非常适合移动端</li>
<li>可实现跨域</li>
</ul>
<p>当然它自然也有缺点：</p>
<ul>
<li>因为它使用的是自定义协议，所以制定协议的时间比JS的API的时间还要长</li>
<li>存在一致性和安全性问题</li>
<li>不兼容IE</li>
</ul>
<p><strong>下面献上书中代码：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//实例化一个对象</span></div><div class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://www.example.com/serve.php'</span>);</div><div class="line"></div><div class="line"><span class="comment">//socket.readyState表示当前状态：</span></div><div class="line">WebSocket.OPENING; <span class="comment">//正在连接</span></div><div class="line">WebSocket.OPEN; <span class="comment">//已经建立连接</span></div><div class="line">WebSocket.CLOSING; <span class="comment">//正在关闭连接</span></div><div class="line">WebSocket.OPEN; <span class="comment">//已经关闭连接</span></div><div class="line"></div><div class="line">socket.close(); <span class="comment">//关闭连接</span></div><div class="line">socket.send(string/json); <span class="comment">//向服务器发送数据</span></div><div class="line"></div><div class="line"><span class="comment">//客户端收到来自服务器的数据，触发message事件</span></div><div class="line">socket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line"> <span class="keyword">var</span> data = event.data</div><div class="line"> <span class="comment">//处理数据</span></div><div class="line">&#125;; </div><div class="line"></div><div class="line"><span class="comment">//成功建立连接时触发open事件</span></div><div class="line">socket.onopen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; </div><div class="line"></div><div class="line"><span class="comment">//发生错误时触发error事件，连接不能持续</span></div><div class="line">socket.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; </div><div class="line"></div><div class="line"><span class="comment">//关闭连接时触发close事件</span></div><div class="line"><span class="comment">//event.clean表示连接是否已经明确地关闭</span></div><div class="line"><span class="comment">//event.code是服务器返回的数值状态码</span></div><div class="line"><span class="comment">//event.reason表示包含服务器发回的消息</span></div><div class="line">socket.onclose = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line"> <span class="built_in">console</span>.log(<span class="string">'Was clean'</span>+event.wasClean+<span class="string">'Code:'</span>+event.code+<span class="string">'Reason='</span>+event.reason);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>至此，跨域部分算是完了……</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/05/JS跨域请求（4）/" itemprop="url">
                  JS跨域请求（4）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-05T00:26:40+08:00" content="2016-06-05">
              2016-06-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/05/JS跨域请求（4）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/05/JS跨域请求（4）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/05/JS跨域请求（4）/" class="leancloud_visitors" data-flag-title="JS跨域请求（4）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="日常闲扯"><a href="#日常闲扯" class="headerlink" title="日常闲扯"></a>日常闲扯</h2><p>晚上在图书馆借书，借到了《JavaScript DOM编程艺术》、《JavaScript设计模式》和《JavaScript DOM高级程序设计》，设计模式这本书是不小心看到的，然后又想到昨天网易云课堂上蔡剑飞老师说的关于计算机基础的设计模式，就顺手翻开来看下，内容还不错，罗列了一些面向对象的主要设计模式，并用JS实现了。明天打算再借一本关于数据结构的和一本关于算法的，等考完试就抓紧开始看了。<br>哦！对了，等明天开始我必须开始重构我那个糟糕的大作业了。计划用模块化编程的方式~</p>
<p>下面进入……</p>
<h2 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h2><h4 id="2-3、SSE（服务器发送事件）"><a href="#2-3、SSE（服务器发送事件）" class="headerlink" title="2.3、SSE（服务器发送事件）"></a>2.3、SSE（服务器发送事件）</h4><p>SSE是根据只读Comet推出的API，可以用API创建到服务器的单向连接，而服务器通过这个连接可以发送任意数量的数据。SSE支持短轮询、长轮询和HTTP流，而且能够在断开连接的时候自动确定什么时候再次连接。（So easy!）不过还是有一些要求的：响应报文的MIME类型必须是<code>text/event-stream</code>，而且浏览器中的API能够解析格式输出。（什么？IE支持吗？当然不支持……）</p>
<p><strong>下面献上书中代码：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(<span class="string">'myevents.php'</span>); <span class="comment">//实例化事件流</span></div><div class="line"><span class="keyword">var</span> state = source.readyState; </div><div class="line"><span class="comment">//state = 0:正在连接到服务器 1:打开了连接 2:关闭了连接</span></div><div class="line"></div><div class="line">source.onopen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">//建立连接时触发</span></div><div class="line"></div><div class="line"><span class="comment">//从服务器接收到新事件时触发</span></div><div class="line">source.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123; </div><div class="line">    <span class="keyword">var</span> data = event.data; <span class="comment">//服务器发回的数据</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">source.onerror = funciton()&#123;&#125;; <span class="comment">//无法建立连接时触发</span></div><div class="line"></div><div class="line">source.close(); <span class="comment">//强制关闭连接并不再重新连接</span></div></pre></td></tr></table></figure></p>
<h4 id="2-4、Web-Sockets（服务器发送事件）"><a href="#2-4、Web-Sockets（服务器发送事件）" class="headerlink" title="2.4、Web Sockets（服务器发送事件）"></a>2.4、Web Sockets（服务器发送事件）</h4><p><strong>可以提供全双工、双向通信……</strong><br>下面的明日再说~</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/04/JS跨域请求（3）/" itemprop="url">
                  JS跨域请求（3）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-04T01:48:06+08:00" content="2016-06-04">
              2016-06-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/04/JS跨域请求（3）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/04/JS跨域请求（3）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/04/JS跨域请求（3）/" class="leancloud_visitors" data-flag-title="JS跨域请求（3）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="日常闲扯"><a href="#日常闲扯" class="headerlink" title="日常闲扯"></a>日常闲扯</h2><p>今天上午看了一个NBA总决赛的第一场，勇士不出意外地赢了。个人觉得观赏性远远没有勇士和雷霆的比赛高，当然也有可能是今天两边主力发挥都不太好的原因。</p>
<p>下午就去看我们量新学院的10周年晚会同时也是毕业生晚会，不对！不能称之为“晚会”，因为是在下午1：30开始的Σ( ° △ °|||)︴。这种事情我个人觉得还是相当浪费时间以及无聊的，但我还是去了是因为想去支持一下我的好朋友（主席团老二）同时也算是给自己放松一下，哈哈~</p>
<p>晚上的时候，先把要交的实验报告写完，然后就开始逛了逛网易云课堂，发现了一个叫<code>网易云课堂前端开发交流会</code>的课程，里面有一些以前网易前端工程师的直播分享，然后看了郑海波老师的《自学前端的常见问题与方法指导》以及蔡剑飞老师的《我的网易十年前端路》，获益良多。我觉得对学习一个东西的方法论以及大概的路线先有一个了解之后再去学习就会少一点盲目多一点自信。</p>
<p>下面进入……</p>
<h2 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h2><p>前面简单总结了下用JS实现跨域请求的原因，以及标准的CORS方法、非标准的图像Ping方法和非标准的JSONP方法。</p>
<h4 id="2-3、Comet"><a href="#2-3、Comet" class="headerlink" title="2.3、Comet"></a>2.3、Comet</h4><p>是一种更加高级的Ajax技术，它是服务器向页面推送数据，而不是像Ajax那样从页面向服务器请求数据。<br>有两种实现Comet的方式：<code>长轮询</code>和<code>HTTP流</code><br>1、 长轮询<br>为什么叫“长轮询”？因为有一个“短轮询”啊~o(￣▽￣)d </p>
<blockquote>
<p>所谓<code>短轮询</code>就是指传统的请求：浏览器定时向服务器发送请求，每次服务器收到请求之后就马上回应。</p>
</blockquote>
<p>而…..</p>
<blockquote>
<p><code>长轮询</code>就是指浏览器是不定时向服务器发送请求的（此时请求时机取决于服务器），当服务器收到请求之后，它会检查资源是否有更新，如果没有，就会保持连接，直到等到资源更新的时候，再把响应发送给浏览器。而浏览器在收到响应的时候，会立即自动再发送一个请求。</p>
</blockquote>
<p><strong>以上需自行脑补画面</strong><br>2、 HTTP流<br>HTTP流就更加简单了，服务器在收到浏览器请求后就一直保持连接（直到页面关闭或者写代码主动关闭），然后定时向浏览器发送响应数据（不论是否更新）。</p>
<p>而在js代码中利用XHR对象就可以实现HTTP流（所以IE下又跪了）。通过监听readystatechange事件并检测readyState的值是否为3（为什么是3呢？因为等于3的时候，xhr.responseText中就会包含接收到的数据啊~），然后比较此前收到的数据，从而截取获得最新的数据。</p>
<p><strong>献上改自书中的代码：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStreamingClient</span>(<span class="params">url,progress,finished</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHTTPRequest(),</div><div class="line">        received = <span class="number">0</span>;</div><div class="line">    xhr.open(<span class="string">'get'</span>,url,<span class="literal">true</span>);</div><div class="line">    xhr.readystatechange = fucntion()&#123;</div><div class="line">        <span class="keyword">var</span>  data = <span class="string">''</span>;</div><div class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">3</span>)&#123;</div><div class="line">            data = xhr.responseText.substring(received);<span class="comment">//截取最新部分数据</span></div><div class="line">            received += data.length;<span class="comment">//累加取得最新数据的位置</span></div><div class="line">            progress(data);<span class="comment">//将最新数据传入回调函数中</span></div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;</div><div class="line">            finished(xhr.responseText);<span class="comment">//将响应的全部内容传入回调</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    xhr.send(<span class="literal">null</span>);</div><div class="line">    <span class="keyword">return</span> xhr;<span class="comment">//为什么还要返回这个？</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> progress = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Received: '</span>+data);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> finish = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done'</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> client = createStreamingClient(<span class="string">'XXX.php'</span>,progress,finish);</div></pre></td></tr></table></figure></p>
<h4 id="2-3、SSE（服务器发送事件）"><a href="#2-3、SSE（服务器发送事件）" class="headerlink" title="2.3、SSE（服务器发送事件）"></a>2.3、SSE（服务器发送事件）</h4><p>已经快两点了……明天见。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/03/JS跨域请求（2）/" itemprop="url">
                  JS跨域请求（2）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-03T01:05:29+08:00" content="2016-06-03">
              2016-06-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/03/JS跨域请求（2）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/03/JS跨域请求（2）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/03/JS跨域请求（2）/" class="leancloud_visitors" data-flag-title="JS跨域请求（2）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="日常闲扯"><a href="#日常闲扯" class="headerlink" title="日常闲扯"></a>日常闲扯</h2><p>今天下午又去面试了，这次是HR面，没有问技术方面的问题（她也不懂啊( ^_^ )），主要问了一些简历上的内容以及其他的问题，印象比较深的是下面这几个：</p>
<ul>
<li>我看你成绩还不错，为什么不考研呢？</li>
<li>你学的是自动化专业，为什么想要做前端呢？</li>
<li>你既然认可网易云课堂的课程，那你为什么不去面试网易？</li>
<li>所以你认为是你自己能力还不够，所以不去面试网易吗？</li>
<li>你目前为止投过几份简历，面试了哪几家?</li>
<li>你认为互联网公司的团队应该是什么样的？</li>
<li>你希望你的主管是什么样的？</li>
</ul>
<p>然后就回学校等通知了……</p>
<p>今天晚上就在研究怎样在JS中实现模块化编程，先直接粗暴地google了一下，看了几篇博文，然后顺藤摸瓜，找到了廖雪峰介绍模块化的博文，然后突然想起翻看了下网易云课堂的笔记本（当初边看视频，边手写记笔记( ╯▽╰)），在产品前端那课程里有讲到模块化编程，于是就直接开始复习了。</p>
<p>视频里主要讲了原生的模块编程（使用namesapce函数）以及常见的模块系统（commonJS、AMD、ES6、systemJS）。所以我现在已经知道模块化编程到底是什么形式了，计划抽空看一下AMD和systemJS就直接上手了。</p>
<p>还有就是今天逛讨论区的时候（突然好后悔当初没有去关注讨论区），知道了模板到底是干嘛用的（用来生成不变的结构，然后可以嵌入动态的数据），也知道了前端架构师的职责。当然产品前端里一些什么同步/异步数据规范、页面入口规范什么的还是不知道是什么鬼。</p>
<p>最后觉得网易云课堂的这个微专业课程真的很好，良心课程，把网易内部自己总结出来的东西都分享出来了，可以让我们少走很多弯路，而且每次看都有不一样的领悟。</p>
<p><strong>（好长的前戏o(╯□╰)o）以上是今天的经历，下面进入……</strong></p>
<h2 id="正题"><a href="#正题" class="headerlink" title="正题"></a>正题</h2><p>昨天写了看《JS高程》关于跨域那一部分的笔记——<a href="http://chulinyin.com/2016/06/02/JS%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/">JS跨域请求（1）</a>，主要是规范的跨域技术CORS，下面继续写下其他的跨域技术：</p>
<h3 id="2、其他跨域技术"><a href="#2、其他跨域技术" class="headerlink" title="2、其他跨域技术"></a>2、其他跨域技术</h3><p>在CORS出现以前，前端工程师们是怎么实现跨域请求的呢？</p>
<h4 id="2-1、图像Ping"><a href="#2-1、图像Ping" class="headerlink" title="2.1、图像Ping"></a>2.1、图像Ping</h4><p>这是一种与服务器端进行简单、单向的跨域通信方式。</p>
<ul>
<li>优点：请求的数据是通过查询字符串的形式发送的，而响应可以是任何内容。不过通常是图片或204响应，最常用于跟踪用户点击页面或动态广告曝光次数。</li>
<li>缺点：只能发送GET请求，同时也无法访问响应文本。</li>
</ul>
<p><strong>献上书中代码：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var img = new Image();</div><div class="line">img.onload = functiion()&#123;</div><div class="line">    console.log(&apos;successful&apos;);</div><div class="line">&#125;</div><div class="line">img.onerror = function()&#123;</div><div class="line">    console.log(&apos;unsuccessful&apos;);</div><div class="line">&#125;</div><div class="line">img.src = &apos;http://www.example.com/test?name=Nicholas&apos;;</div></pre></td></tr></table></figure></p>
<h4 id="2-1、JSONP-JSON-with-padding"><a href="#2-1、JSONP-JSON-with-padding" class="headerlink" title="2.1、JSONP (JSON with padding)"></a>2.1、JSONP (JSON with padding)</h4><p>图像Ping利用了<code>&lt;img&gt;</code>元素，而JSONP则利用了动态<code>&lt;script&gt;元素</code>，使用的时候也是令<code>src=&#39;跨域的URL&#39;</code>，这就令JSONP成为了有效的JS代码，在请求完成后，就会立即执行。<br>JSONP由两部分组成：<code>回调函数</code>+<code>JSON数据</code>，一般回调函数是通过请求中的查询字符串实现的。</p>
<ul>
<li>优点：能直接访问响应文本，支持浏览器与服务器的双向通信。</li>
<li>缺点：是从其他域中加载代码并执行，如果其他域不安全就不能用了。另外，确定JSONP请求失败，只能通过 HTML5 新增的 onerror 事件处理程序（目前没有得到浏览器支持），或者计时器定时检测是否受到响应（耗费性能）。</li>
</ul>
<p><strong>献上改自书中代码：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hadleReponse</span>(<span class="params">response</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'successful'</span>);</div><div class="line">    <span class="comment">// do something with response</span></div><div class="line">    <span class="comment">//var responseObj = JSON.parse(response);</span></div><div class="line">    <span class="comment">//...</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">script.type = <span class="string">'text/javascript'</span>;</div><div class="line">script.src = <span class="string">'http://example.com/json/?callback=handleResponse'</span>;</div><div class="line"><span class="built_in">document</span>.body.appendChild(script);</div><div class="line"></div><div class="line"><span class="comment">// 在远程服务器上会有如下代码 handleResponse(&#123;"name":"vaule"&#125;)</span></div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 动态加载 js 代码</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">url, callback</span>)</span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>)</div><div class="line">    script.type = <span class="string">"text/javascript"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (script.readyState)&#123;  <span class="comment">//IE</span></div><div class="line">        script.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (script.readyState == <span class="string">"loaded"</span> ||</div><div class="line">                    script.readyState == <span class="string">"complete"</span>)&#123;</div><div class="line">                script.onreadystatechange = <span class="literal">null</span>;</div><div class="line">                callback();</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;  <span class="comment">//Others</span></div><div class="line">        script.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            callback();</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">  	script.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'ERROR: '</span> + err);</div><div class="line">  	&#125;</div><div class="line"></div><div class="line">    script.src = url;</div><div class="line">    <span class="built_in">document</span>.body.appendChild(script);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 参考自：https://www.nczonline.net/blog/2009/06/23/loading-javascript-without-blocking/</span></div></pre></td></tr></table></figure>
<h4 id="2-3、Comet"><a href="#2-3、Comet" class="headerlink" title="2.3、Comet"></a>2.3、Comet</h4><p>是一种更加高级的Ajax技术，它是服务器向页面推送数据，而不是像Ajax那样从页面向服务器请求数据。<br>有两种实现Comet的方式：<code>长轮询</code>和<code>HTTP流</code></p>
<p>……明天继续，实在太晚了(￣o￣) . z Z</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/02/JS跨域请求（1）/" itemprop="url">
                  JS跨域请求（1）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-02T00:20:04+08:00" content="2016-06-02">
              2016-06-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/02/JS跨域请求（1）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/02/JS跨域请求（1）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/02/JS跨域请求（1）/" class="leancloud_visitors" data-flag-title="JS跨域请求（1）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>今天一大早就去面试了，在公交车上颠簸近一个半小时，然后下车走了10多分钟的路后，终于在9.30的时候到了面试的公司“淘粉吧”，公司内部装修的还是蛮有格调的，氛围挺轻松写意的。<br>在会议室做了一份笔试题，然后面试了20分钟左右，就马上又赶去公交车站了（因为要赶在12.30前回学校拍照，错过了就会很麻烦）。<br>在车上的时候，又接到了HR的电话，让我马上过去复试，因为刚刚面试我的主管没有找到HR,也就是说他刚刚是在没有看到我简历的情况下，面试了我二十分钟。所以我不得不明天再去一趟。<br>不过也是福祸相依吧，如果那个主管是在拿到我的简历的情况下面试我的，时间估计得持续一小时，那样的话我就来不及赶回学校了，就不得不补拍照的坑了。</p>
</blockquote>
<p>今天下午就去图书馆了，加上晚上的时间基本都在重新看一遍《JS高级程序设计》里的：</p>
<ul>
<li>ajax请求和跨域请求</li>
<li>高级函数的应用（作用域安全的构造函数、惰性载入函数(使初始化判断只进行一次)</li>
<li>函数绑定及柯里化[fnc.bind()]）</li>
<li>自定义事件</li>
<li>模块模式的编程。</li>
</ul>
<p>然后开始分析网易云课堂上老师讲<strong>组件</strong>的时候给的两个demo，瞬间有了许多领悟。后面我准备再了解下怎么把各个模块组合起来，还有什么模板解析技术，我就要开始重构当初那个大作业的js代码了。现在回过头去看当初写的代码，确实太嫩了。</p>
<p>下面就如标题所述，开始讲一下跨域请求吧~</p>
<h3 id="为什么要跨域"><a href="#为什么要跨域" class="headerlink" title="为什么要跨域"></a>为什么要跨域</h3><p>因为通过XHR实现Ajax通信有一个主要限制————跨域安全策略。默认情况下，XHR对象只能访问与包含它的页面位于同一个域中的资源。可是有时候我们需要使用跨域资源。那就只能依靠一些跨域技术了。</p>
<h3 id="1、CORS跨域资源共享"><a href="#1、CORS跨域资源共享" class="headerlink" title="1、CORS跨域资源共享"></a>1、CORS跨域资源共享</h3><p>这是W3C指定制定的一个标准，使用自定义的HTTP头部让浏览器和服务器沟通，在发送请求的时候，需要给请求报文添加一个额外的Origin首部字段，值为页面的源信息（协议+域名+端口），如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Origin: http://www.chulinyin.com</div></pre></td></tr></table></figure></p>
<p>然后服务器就根据这个首部字段决定是否响应，如果响应的话，响应报文中的Access-Control-Allow-Origin的首部字段中就会包含相同的源信息，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Access-Control-Allow-Origin: http://www.chulinyin.com</div></pre></td></tr></table></figure></p>
<p>如果响应报文没有这个首部字段或者值不匹配，浏览器就会驳回请求。</p>
<blockquote>
<p>注意，请求和响应报文中都不会包含Cookie信息。</p>
</blockquote>
<h4 id="1-1、IE中CORS的实现"><a href="#1-1、IE中CORS的实现" class="headerlink" title="1.1、IE中CORS的实现"></a>1.1、IE中CORS的实现</h4><p>IE8中使用了与XHR相似的XDR对象，它有一些不同之处：</p>
<ul>
<li>cookie不随请求发送，也不随响应返回</li>
<li>只能设置请求首部字段中的Content-Type字段</li>
<li>不能访问响应报文的首部信息</li>
<li>只支持GET和POST请求</li>
<li>所有的XDR请求都是异步执行的</li>
<li>接收到响应后只能访问响应文本，没有办法确定响应的状态码</li>
<li>用load事件和error事件监测响应成功或失败</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xdr = XDomainRequest();</div><div class="line">xdr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(xdr.responseText);</div><div class="line">&#125;</div><div class="line">xdr.error = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    conlose.log(<span class="string">'An error occurred.'</span>)</div><div class="line">&#125;</div><div class="line">xdr.open(<span class="string">"get"</span>,<span class="string">"http://www.somewhere-else.com/page"</span>);</div><div class="line">xdr.send(<span class="literal">null</span>);</div><div class="line"><span class="comment">//POST方法：</span></div><div class="line">xdr.open(<span class="string">'post'</span>,<span class="string">'http://www.somewhere-else.com/page'</span>);</div><div class="line">xdr.contentType = <span class="string">'application/x-www-form-urlencoded'</span>;</div><div class="line">xdr.send(<span class="string">'name1=value1&amp;name2=value2'</span>);</div></pre></td></tr></table></figure>
<h4 id="1-2、其他浏览器中CORS的实现"><a href="#1-2、其他浏览器中CORS的实现" class="headerlink" title="1.2、其他浏览器中CORS的实现"></a>1.2、其他浏览器中CORS的实现</h4><p>直接使用原生的XHR对象即可，不过也有一些限制：</p>
<ul>
<li>不能使用setRequestHeader()设置自定义的头部</li>
<li>不能发送和接收Cookie</li>
<li>调用getAllResponseHeaders()方法会返回空字符串<br>因为可能会和同域请求难以区分，所以如果是同域的请求最好使用相对的URL，跨域请求使用绝对URL。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = XMLHTTPRequest();</div><div class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(xhr.readySate == <span class="number">4</span>)&#123;</div><div class="line">        <span class="keyword">if</span>(xhr.status&gt;=<span class="number">200</span>&amp;&amp;xhr.status&lt;<span class="number">300</span>||xhr.status==<span class="number">304</span>)&#123;</div><div class="line">            callback(xhr.responseText);</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'success'</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'Request was unsuccessful:'</span> + xhr.status);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">xhr.open(<span class="string">"get"</span>,<span class="string">'http://www.somewhere-else.com/page'</span>,ture);</div><div class="line">xhr.send(<span class="literal">null</span>);</div></pre></td></tr></table></figure>
<h4 id="1-3、CORS的跨浏览器实现"><a href="#1-3、CORS的跨浏览器实现" class="headerlink" title="1.3、CORS的跨浏览器实现"></a>1.3、CORS的跨浏览器实现</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 简单的（非 preflightted 和不带凭据的）跨浏览器的跨域请求方案</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCORSRequest</span>(<span class="params">method,url</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHTTPRequest();</div><div class="line">    <span class="keyword">if</span>(<span class="string">'withCredentials'</span> <span class="keyword">in</span> xhr)&#123;</div><div class="line">        xhr.open(method,url,ture);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> XDomianRequest != <span class="string">"undefined"</span> )&#123;</div><div class="line">        xhr = <span class="keyword">new</span> XDomainRequest();</div><div class="line">        xhr.open(method,url);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        xhr = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> xhr;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> request = createCORSRequest(<span class="string">'get'</span>,<span class="string">'http://www.somewhere-else.com/page'</span>);</div><div class="line"><span class="keyword">if</span>(request)&#123;</div><div class="line">    request.onload = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">        callback(xhr.reponseText);</div><div class="line">    &#125;;</div><div class="line">    request.send();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>XMLHttpRequest 和 XDomainRequest 对象共同的属性、方法、事件：</p>
<ul>
<li>responseText</li>
<li>open()</li>
<li>send()</li>
<li>abort()</li>
<li>onload，用于代替 onreadystatechange 检测成功</li>
<li>onerror，用于代替 onreadystatechange 检测错误</li>
</ul>
<h3 id="2、其他跨域技术"><a href="#2、其他跨域技术" class="headerlink" title="2、其他跨域技术"></a>2、其他跨域技术</h3><p>明天再写……</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/01/初见HTTP（4）/" itemprop="url">
                  初见HTTP（4）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-01T00:26:20+08:00" content="2016-06-01">
              2016-06-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/HTTP/" itemprop="url" rel="index">
                    <span itemprop="name">HTTP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/01/初见HTTP（4）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/01/初见HTTP（4）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/01/初见HTTP（4）/" class="leancloud_visitors" data-flag-title="初见HTTP（4）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>明天就要去面试了，还是有点紧张的，今天一天都在复习基础的HTML、CSS和JS，明天早上早点起，再看会就出发去面试了。（虽然按道理讲应该是今天，而不是明天了）</p>
</blockquote>
<p>既然HTTPS有在安全方面作用这么大，那为什么不直接放弃HTTP，都改用HTTPS呢？所以HTTPS当然也有一些不足之处：</p>
<ol>
<li>由于它比HTTP多了一个到SSL的环节，这无疑大大增加了请求时间，降低了响应效率；</li>
<li>因为公开秘钥需要由第三方颁发证书进行安全认证，而这证书又异常的贵。</li>
</ol>
<p>以上这两个原因导致了HTTPS协议如果不是在必要的情况下，几乎很少用。而现在用户验证登录很多都是直接使用表单提交到服务器进行验证。</p>
<p>另外，对于HTTP响应不及时，每次想要更新都需要从客户端发送请求的情况，一些新的技术也在发展。</p>
<ol>
<li>Ajax的异步请求，可以让页面内容部分刷新</li>
<li>Comet可以让服务器在收到请求后不马上响应，而是等待资源有更新后马上响应返回。</li>
<li>Spedy在HTTP和TCP之间增加一个会话的形式，可以让HTTP多路复用同时请求多个资源、设置请求的优先级、进行首部压缩、服务器推送提示等</li>
<li>WebSocket基于HTTP，在一次握手成功后就可以进行全双工通信，建立持续连接，并且它的首部信息很少，还采用了独立的数据帧。（全双工就是说，客户端和服务器之间可以相互发送东西，这在一些聊天应用上就很有用）</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="chulinyin" />
          <p class="site-author-name" itemprop="name">chulinyin</p>
          <p class="site-description motion-element" itemprop="description">褚林银的秘密基地</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">94</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">80</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chulinyin</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chulinyin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("dtz5YifF8WHLzMkG3byRjSM8-gzGzoHsz", "dKrJHG1PJWQKqRRc1YrOva9E");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
